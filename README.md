# Reverie Voice Input SDK

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![](https://jitpack.io/v/reverieinc/rev-voice-input-android.svg)](https://jitpack.io/#reverieinc/rev-voice-input-android)

This SDK helps in accurately converting speech into text using an API powered by Reverie's AI
technology. The solution will transcribe the speech in real time in various Indian languages and
audio formats.

## Key Features

- **Accurate Speech-to-Text Conversion:** The Voice Input SDK ensures precise and reliable
  conversion of spoken words into text, leveraging the advanced AI technology developed by Reverie.

- **Minimalistic Integration:** Seamlessly integrate the SDK into your application with minimal
  effort, allowing you to focus on enhancing the user experience rather than grappling with complex
  integration processes.

- **Option to Use Bundled UI:** Enjoy the convenience of utilizing the bundled user interface,
  streamlining the integration process and offering a consistent and user-friendly experience within
  your application.

## Authentication Modes

The SDK now supports **two** authentication modes:

1. **API Key / App ID** (legacy, backward compatible)
    - Uses `apiKey` and `appId` passed directly to the SDK.
    - Works with existing integrations without any change.

2. **Token-based** (recommended for new integrations)
    - Uses a short-lived token generated by Reverie’s backend/token APIs.
    - The mobile app passes only the token to the SDK; no `apiKey` or `appId` is required in the app.

Both modes share the same runtime API (`startRecognition`, timeouts, listeners, etc.).
Only the constructor changes.

## API Reference

There are now **four constructors** in the **RevVoiceInput** class:

- Two **API key / App ID based** 
- Two **token-based** (new)

There are still two **startRecognition()** methods in the **RevVoiceInput** class:

- One that allows customization of language and domain for a specific call.
- One that uses default language and domain.

You can choose:

- Which **auth mode** you want (API key / App ID or token).
- Whether you want to configure **language/domain** globally (via constructor) or per call.


### Constructors
#### API Key / App ID Mode
These constructors are **backward compatible** with existing integrations.

##### Constructor 1 (full control – legacy)

| Parameter | Type   | Required | Default   | Description                     |
|-----------|--------|----------|-----------|---------------------------------|
| apiKey    | String | true     | -         | Api key given to the client     |
| appId     | String | true     | -         | App Id given to the client      |
| domain    | String | false    | ‘generic’ | Domain of the voice Input       |
| Language  | String | false    | ‘en’      | Language of voice Input         |
| Logging   | String | true     | -         | Logging of data required or not |

##### Constructor 2 (minimal – legacy)


| Parameter | Type   | Required | Default        | Description                     |
|-----------|--------|----------|----------------|---------------------------------|
| apiKey    | String | true     | -              | Api key given to the client     |
| appId     | String | true     | -              | App Id given to the client      |
| Logging   | String | true     | -              | Logging of data required or not |


#### Token-based Mode (New)

These constructors use a token issued by Reverie’s backend instead of `apiKey` / `appId`.
> How you obtain the token (e.g. from your backend, from Reverie’s token generation API) is application-specific. The SDK expects a valid token string.

##### Constructor 3 (full control – token):

    | Parameter | Type   | Required | Default   | Description                        |
    |----------:|--------|----------|-----------|------------------------------------|
    | token     | String | true     | -         | Token for STT streaming |
    | domain    | String | false    | `generic` | Domain of the voice input          |
    | language  | String | false    | `en`      | Language of voice input            |
    | logging   | String | true     | -         | Logging mode for the session       |

##### Constructor 4 (minimal – token):

    | Parameter | Type   | Required | Default   | Description                        |
    |----------:|--------|----------|-----------|------------------------------------|
    | token     | String | true     | -         | Token for STT streaming |
    | logging   | String | true     | -         | Logging mode for the session       |

### startRecognition()
##### Method 1

| Element    | Type    | Required | Default   | Description                          |
|------------|---------|----------|-----------|--------------------------------------|
| Context    | context | true     | -         | Context of the activity              |
| isUiNeeded | boolean | true     | -         | to use bundled UI element of the SDK |
| Language   | String  | false    | ‘en’      | Language of Input                    |
| Domain     | String  | false    | ‘generic’ | Domain of Input                      |


#### Method 2

| Element    | Type    | Required | Default | Description                          |
|------------|---------|----------|---------|--------------------------------------|
| Context    | context | true     | -       | Context of the activity              |
| isUiNeeded | boolean | true     | -       | to use bundled UI element of the SDK |

> In both auth modes (API key / App ID or token), you use these methods exactly
> the same way. The SDK internally chooses the correct backend URL based on
> the constructor used.


### Supported Constants
Various constant values are provided in SDK for DOMAIN, LANGUAGES, and LOGGING parameters

#### Domain
1. `Domain.VOICE_SEARCH`
2. `Domain.GENERIC`
3. `Domain.BFSI`
4. `Domain.INDUS_APP_SEARCH`

#### Languages
1.  `Languages.ENGLISH`
2.  `Languages.HINDI`

#### Logging
1.  `Logging.TRUE` - stores client’s audio and keeps transcript in logs.
2.  `Logging.NO_AUDIO` -  does not store client’s audio but keeps transcript in logs.
3.  `Logging.NO_TRANSCRIPT` - does not keep transcript in logs but stores client’s audio.
4.  `Logging.FALSE` - does not keep the client’s audio or the transcript in the log.



## Integrate the SDK in Your Application
[![](https://jitpack.io/v/reverieinc/rev-voice-input-android.svg)](https://jitpack.io/#reverieinc/rev-voice-input-android)


To integrate the SDK into your application, follow these steps:
1. Addition of Gradle dependencies as follows:

   - ##### **Groovy:**

       Add the `jitpack.io` repository to the project level `build.gradle` file:
       ```groovy
       dependencyResolutionManagement {
               repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
               repositories {
                   mavenCentral()
                   maven { url 'https://jitpack.io' }
               }
           }
       ```
       and add the following to the app-level dependencies:
       ```groovy
       dependencies {
             implementation 'com.github.reverieinc:rev-voice-input-android:v1.0.5'
       }
       ```

   - ##### **or Kotlin DSL:**
       Add the `jitpack.io` repository to the project level `build.gradle` file:
       ```groovy
       dependencyResolutionManagement {
           repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
           repositories {
               mavenCentral()
               maven { url = uri("https://jitpack.io") }
           }
       }
       ```
       and add the following to the app-level dependencies:
       ```groovy
       dependencies {
             implementation ("com.github.reverieinc:rev-voice-input-android:v1.0.5")
       }
    
       ```
     > Note:
     > - Verify that the latest version is added as a dependency.
     > - Min Supported Android SDK-21


2. Addition of Necessary Manifest Permissions

    Add the following permissions in your manifest:
    
    ```xml
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission  android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
    ```
   > Make sure to request the user to grant the RECORD_AUDIO permission at runtime.
   

## SDK usage example:
- The SDK can be initialized either with **API key / App ID (legacy mode)**
  or with a **short-lived token (recommended mode)**. The usage of
  `startRecognition`, listeners, and timeouts remains the same.
- [Kotlin based](#kotlin-based-example-implementation-of-the-sdk)
- [Java based](#java-based-example-implementation-of-the-sdk)





<details open>
  <summary>Kotlin</summary>

### Kotlin-based example implementation of the SDK:


1. Prepare the constructor:

   **Type I:** API key / App ID with domain & language
   
    ```kotlin
    //Preparing the Constructor with  API-key, APP-ID, language, domain, and logging
        val  voiceInput=RevVoiceInput(API_KEY,APP_ID,
        Domain.GENERIC, 
        Languages.ENGLISH,
        Logging.TRUE)
    ```
	**Type II:** API key / App ID only

     ```kotlin
    //Preparing the constructor with a valid API key and APP-ID
          val voiceInput = RevVoiceInput(API_KEY, APP_ID,Logging.TRUE)
    ```

   **Type III:** Token + domain + language constructor:

    ```kotlin
    // Preparing the constructor with token, language, domain, and logging
    val voiceInput = RevVoiceInput(
    TOKEN,                    // Short-lived token string
    Domain.GENERIC,
    Languages.ENGLISH,
    Logging.TRUE
    )
    ```
   **Type IV:** Token + logging constructor:

    ```kotlin
          // Preparing the constructor with a token and logging
          val voiceInput = RevVoiceInput(
              TOKEN,
              Logging.TRUE
          )
   
    ```

   > For more details about the 4 types of constructors check: [API Reference](#api-reference)
    

3. Implement the listener:
    ```kotlin
    //Implement the listener to get results and error details
         voiceInput.setListener(object : VoiceInputListener {
          override fun onResult(result: VoiceInputResultData?) {

            }

            override fun onError(error: VoiceInputErrorResponseData?) {

            }

            override fun onRecordingStart(isStart: Boolean) {
                //
            }

            override fun onRecordingEnd(isEnd: Boolean) {
              
            }
        })
    ```

5. Starting the Input process:

   **Type I:**
   
    ```kotlin
        voiceInput.startRecognition(
                    getApplicationContext(),
                    true
                    ,Domain.GENERIC,
                     Languages.ENGLISH
            )
    ```
    **Type II:**
    ```kotlin
   //To start the voice search
          voiceInput.startRecognition(
              applicationContext,
              true 
          )
    ```
	> For more details about the types check: [API Reference](#api-reference)

7. (Optional) Abort the search process
    ```kotlin
         //To stop the voice searching forcefully
       voiceInput.cancel()
   ```
8. (Optional) Finish the search process
    ```kotlin
         //To stop the voice searching forcefully and get the result
       voiceInput.finishInput()
   ```
9. (Optional) To Set the No Input Timeout
    ```kotlin
      voiceInput.setNoInputTimeout(5.0)
   ```
10. (Optional) To Set the TimeOut
    ```kotlin
      voiceInput.setTimeout(5.0)
    ```
11. (Optional) To Set the Silence
    ```kotlin
      voiceInput.setSilence(2.0)
    ```   
12. (Optional) To Enable Logging
    ```kotlin
      import com.reverie.voiceinput.LOG;
   
       LOG.DEBUG=true
    ```

</details>

<details>
  <summary>Java</summary>

### Java based example implementation of the SDK:

1. Prepare the constructor:

	**Type I:** API key / App ID with domain & language
   
   ```java 
   //Preparing the Constructor with a valid API key, APP-ID, language, domain, and Logging
   
    RevVoiceInput voiceInput = new RevVoiceInput(
                API_KEY,
                APP_ID,
                Domain.GENERIC, Languages.ENGLISH, Logging.TRUE);

   
    ```
   **Type II:** API key / App ID only
     ```java
        //Preparing the constructor with a valid API key and APP-ID
        RevVoiceInput voiceInput = new RevVoiceInput(API_KEY, APP_ID,Logging.TRUE);
              
    ```
   **Type III:** Token + domain + language constructor:
    
      ```java
      // Preparing the constructor with token, language, domain, and logging
      RevVoiceInput voiceInput = new RevVoiceInput(
          TOKEN,                    // Short-lived token string
          Domain.GENERIC,
          Languages.ENGLISH,
          Logging.TRUE
      );
      ```

   **Type IV:** Token + logging constructor:
    
      ```java
      // Preparing the constructor with a token and logging
      RevVoiceInput voiceInput = new RevVoiceInput(
          TOKEN,
          Logging.TRUE
      );
      ```
   > For more details about the types check: [API Reference](#api-reference)

3. Implement the listeners:
    ```java
          //Implement the listener to get results and error details
       voiceInput.setListener(new VoiceInputListener() {



            @Override
            public void onResult(VoiceInputResultData result) {
                //Log.d(TAG, "onResult: " + result);
            }

            @Override
            public void onError(VoiceInputErrorResponseData error) {
    		//Log.d(TAG, "onError: " + error.toString());
            }

            @Override
            public void onRecordingStart(boolean isStart) {

            }

            @Override
            public void onRecordingEnd(boolean isEnd) {

            }

        });
    ```  

4. Starting the search Process.

   **Type I:**
      ```java

    voiceInput.startRecognition(
    getApplicationContext(),
    true
    Domain.GENERIC, 
    Languages.ENGLISH 
    )
    ```
      **Type II:**
   
    ```java
    //To Start the Voice Input
          voiceInput.startRecognition(
              getApplicationContext(),//Context
              true//isUiNeeded
          );
          
    ```

   > For more details about the types check: [API Reference](#api-reference)

6. (Optional) Abort the search process
    ```java
         //To stop the voice searching forcefully
       voiceInput.cancel();
   ```
7. (Optional) Finish the search process
    ```java
         //To stop the voice searching forcefully and get the result
       voiceInput.finishInput();
   ```
8. (Optional) To Set the No Input Timeout
    ```java
      voiceInput.setNoInputTimeout(5.0);
   ```
9. (Optional) To Set the TimeOut    
    ```java
      voiceInput.setTimeout(5.0);
    ```
10. (Optional) To Set the Silence
    ```java
      voiceInput.setSilence(2.0)
    ```
11. (Optional) To Enable Logging(Logcat)
    ```java
        import com.reverie.voiceinput.LOG;
      
        LOG.Companion.setDEBUG(true);
    ```   


</details>

License
-------
All Rights Reserved. Copyright 2023. Reverie Language Technologies Limited.(https://reverieinc.com/)

Reverie Voice Input SDK can be used according to the [Apache License, Version 2.0](LICENSE).
        
